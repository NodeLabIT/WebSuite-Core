<template>
    <div>
        <a class="floating-button"><i class="material-icons">add</i></a>
        <table>
            <thead class="uppercase">
            <tr>
                <td style="width: 48px;"><i class="material-icons">indeterminate_check_box</i></td>
                <td style="width: calc(40% - 48);"></td>
                <td style="width: 12.5%;">Rang</td>
                <td style="width: 7.5%;">Punkte</td>
                <td style="width: calc(20% - 24px);">registriert</td>
                <td style="width: calc(20% - 24px);">letzte aktivit√§t</td>
                <td style="width: 48px;"></td>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td><i class="material-icons">check_box_outline_blank</i></td>
                <td>
                    <img src="/images/avatars/58-446b0bd040e05628ad190369e7ed8317a7d2cfc1.jpg" width="44" height="44">
                    <div class="inliner">
                        <span class="primary-text">ilou</span>
                        <span>info@nodelab-it.de</span>
                    </div>
                </td>
                <td>Administrator</td>
                <td>6132</td>
                <td>am 04.01.2017, 13:57 Uhr</td>
                <td>vor 17 Minuten</td>
                <td><i class="material-icons">more_horiz</i></td>
            </tr>
            <tr>
                <td><i class="material-icons">check_box_outline_blank</i></td>
                <td>
                    <img src="/images/avatars/58-446b0bd040e05628ad190369e7ed8317a7d2cfc1.jpg" width="44" height="44">
                    <div class="inliner">
                        <span class="primary-text">ilou</span>
                        <span>info@nodelab-it.de</span>
                    </div>
                </td>
                <td>Administrator</td>
                <td>6132</td>
                <td>am 04.01.2017, 13:57 Uhr</td>
                <td>vor 17 Minuten</td>
                <td><i class="material-icons">more_horiz</i></td>
            </tr>
            <tr>
                <td><i class="material-icons active">check_box</i></td>
                <td>
                    <img src="/images/avatars/58-446b0bd040e05628ad190369e7ed8317a7d2cfc1.jpg" width="44" height="44">
                    <div class="inliner">
                        <span class="primary-text">ilou</span>
                        <span>info@nodelab-it.de</span>
                    </div>
                </td>
                <td>Administrator</td>
                <td>6132</td>
                <td>am 04.01.2017, 13:57 Uhr</td>
                <td>vor 17 Minuten</td>
                <td><i class="material-icons">more_horiz</i></td>
            </tr>
            <tr>
                <td><i class="material-icons active">check_box</i></td>
                <td>
                    <img src="/images/avatars/58-446b0bd040e05628ad190369e7ed8317a7d2cfc1.jpg" width="44" height="44">
                    <div class="inliner">
                        <span class="primary-text">ilou</span>
                        <span>info@nodelab-it.de</span>
                    </div>
                </td>
                <td>Administrator</td>
                <td>6132</td>
                <td>am 04.01.2017, 13:57 Uhr</td>
                <td>vor 17 Minuten</td>
                <td><i class="material-icons">more_horiz</i></td>
            </tr>
            <tr>
                <td><i class="material-icons">check_box_outline_blank</i></td>
                <td>
                    <img src="/images/avatars/58-446b0bd040e05628ad190369e7ed8317a7d2cfc1.jpg" width="44" height="44">
                    <div class="inliner">
                        <span class="primary-text">ilou</span>
                        <span>info@nodelab-it.de</span>
                    </div>
                </td>
                <td>Administrator</td>
                <td>6132</td>
                <td>am 04.01.2017, 13:57 Uhr</td>
                <td>vor 17 Minuten</td>
                <td><i class="material-icons">more_horiz</i></td>
            </tr>
            <tr>
                <td><i class="material-icons">check_box_outline_blank</i></td>
                <td>
                    <img src="/images/avatars/58-446b0bd040e05628ad190369e7ed8317a7d2cfc1.jpg" width="44" height="44">
                    <div class="inliner">
                        <span class="primary-text">ilou</span>
                        <span>info@nodelab-it.de</span>
                    </div>
                </td>
                <td>Administrator</td>
                <td>6132</td>
                <td>am 04.01.2017, 13:57 Uhr</td>
                <td>vor 17 Minuten</td>
                <td><i class="material-icons">more_horiz</i></td>
            </tr>
            <tr>
                <td><i class="material-icons">check_box_outline_blank</i></td>
                <td>
                    <img src="/images/avatars/58-446b0bd040e05628ad190369e7ed8317a7d2cfc1.jpg" width="44" height="44">
                    <div class="inliner">
                        <span class="primary-text">ilou</span>
                        <span>info@nodelab-it.de</span>
                    </div>
                </td>
                <td>Administrator</td>
                <td>6132</td>
                <td>am 04.01.2017, 13:57 Uhr</td>
                <td>vor 17 Minuten</td>
                <td><i class="material-icons">more_horiz</i></td>
            </tr>
            <tr>
                <td><i class="material-icons active">check_box</i></td>
                <td>
                    <img src="/images/avatars/58-446b0bd040e05628ad190369e7ed8317a7d2cfc1.jpg" width="44" height="44">
                    <div class="inliner">
                        <span class="primary-text">ilou</span>
                        <span>info@nodelab-it.de</span>
                    </div>
                </td>
                <td>Administrator</td>
                <td>6132</td>
                <td>am 04.01.2017, 13:57 Uhr</td>
                <td>vor 17 Minuten</td>
                <td><a><i class="material-icons">more_horiz</i></a></td>
            </tr>
            </tbody>
        </table>
        <router-link to="/users/1">1</router-link>
        <router-link to="/users/2">2</router-link>
        <router-link to="/users/3">3</router-link>
        <router-link to="/users/4">4</router-link>
        <router-link to="/users/5">5</router-link>
        <router-link to="/users/6">6</router-link>
        <router-link to="/users/7">7</router-link>
    </div>
</template>

<script>
    import { sio } from '../main';

    export default {
        data() {
            return {
                pageID: 0,
                users: {}
            }
        },
        methods: {
            getUserList() {
                sio().emit('cp-user-list', {page: this.pageID});
            },
            updatePageID() {
                if(this.$route.params.pageID) {
                    this.pageID = this.$route.params.pageID;
                } else {
                    this.pageID = 1;
                }
            }
        },
        watch: {
            '$route' (to, from) {
                this.updatePageID();
                this.getUserList();
            }
        },
        created() {
            this.$root.$data.title = this.$options.filters.translate('users-overview');
            this.updatePageID();
            this.getUserList();

            sio().on('cp-user-list', data => {
                if(data.err && data.err === 'page-not-found') {
                    this.$router.push('/404');
                    return;
                }
                this.users = data.users;
            });
        }
    }
</script>